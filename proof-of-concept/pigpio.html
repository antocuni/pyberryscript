<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width,initial-scale=1.0" />
        <title>pyscript pigpio</title>
        <script type="module" src="/pyscript.core/min.js"></script>
    </head>
    <body>
      <script type="py" config="./pigpio.toml">
        from js import XWorker
        import pyscript_sync_main

        def turn_on():
            my_worker.postMessage("turn_on")

        def turn_off():
            my_worker.postMessage("turn_off")

        def blink():
            my_worker.postMessage("blink")

        my_worker = XWorker('./pigpio_worker.py', type='py', config='./pigpio.toml')
        pyscript_sync_main.setup(my_worker)
      </script>

      <h1>Toggle led using workers</h1>
      <button py-click="turn_on()">Led ON</button> <br><br>
      <button py-click="turn_off()">Led OFF</button> <br><br>
      <button py-click="blink()">Blink</button>
    </body>
</html>
